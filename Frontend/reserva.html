<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Reservar Citas</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin: 0; padding: 0; }
    header { background: #2c3e50; color: white; padding: 15px; text-align: center; }
    .container { max-width: 1000px; margin: 30px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    h2 { margin-bottom: 15px; color: #333; }
    form { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
    input, select, button { padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 15px; }
    button { background: #3498db; color: white; border: none; cursor: pointer; transition: 0.3s; }
    button:hover { background: #2980b9; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
    th { background: #3498db; color: white; }
    .delete-btn { background: #e74c3c; padding: 6px 10px; border-radius: 6px; color: white; cursor: pointer; border: none; margin-right: 5px; }
    .delete-btn:hover { background: #c0392b; }
    .edit-btn { background: #f39c12; padding: 6px 10px; border-radius: 6px; color: white; cursor: pointer; border: none; }
    .edit-btn:hover { background: #d35400; }
    .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .tab { padding: 10px 20px; background: #3498db; color: white; border-radius: 8px; cursor: pointer; transition: 0.3s; }
    .tab:hover { background: #2980b9; }
    .active-tab { background: #2c3e50 !important; }
    .panel { display: none; }
    .panel.active { display: block; }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“… Sistema de Citas</h1>
  </header>

  <div class="container">
    <div class="tabs">
      <div class="tab active-tab" data-panel="panelUsuario">Registrar Cita</div>
      <div class="tab" data-panel="panelVerCitas">Ver Citas</div>
    </div>

    <!-- Panel Usuario -->
    <div id="panelUsuario" class="panel active">
      <form id="citaForm">
        <input type="text" id="cedula" placeholder="CÃ©dula" required>
        <input type="text" id="nombre" placeholder="Nombre del cliente" required>
        <input type="email" id="correo" placeholder="Correo electrÃ³nico" required>
        <select id="servicio" required>
          <option value="">Seleccione servicio</option>
          <option value="Carnet de aprendizaje">Carnet de aprendizaje</option>
          <option value="Licencia de conducir">Licencia de conducir</option>
          <option value="Prueba de conducir">Prueba de conducir</option>
          <option value="Otro">Otro</option>
        </select>
        <input type="date" id="fecha" required>
        <input type="time" id="hora" required>
        <button type="submit">âž• Reservar</button>
      </form>
    </div>

    <!-- Panel Ver Citas -->
    <div id="panelVerCitas" class="panel">
      <h2>Citas Reservadas</h2>
      <table id="tablaCitas">
        <thead>
          <tr>
            <th>CÃ©dula</th>
            <th>Cliente</th>
            <th>Correo</th>
            <th>Servicio</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll(".tab");
    const panels = document.querySelectorAll(".panel");

    tabs.forEach(tab => {
      tab.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active-tab"));
        panels.forEach(p => p.classList.remove("active"));
        tab.classList.add("active-tab");
        document.getElementById(tab.dataset.panel).classList.add("active");
      });
    });

    const form = document.getElementById("citaForm");
    const tabla = document.getElementById("tablaCitas").querySelector("tbody");
    let filaEditando = null;

    // Limitar fechas: de 7 dÃ­as a 365 dÃ­as desde hoy
    const fechaInput = document.getElementById("fecha");
    const hoy = new Date();
    const minFecha = new Date(hoy.getTime() + 7*24*60*60*1000);
    const maxFecha = new Date(hoy.getTime() + 365*24*60*60*1000);
    fechaInput.min = minFecha.toISOString().split("T")[0];
    fechaInput.max = maxFecha.toISOString().split("T")[0];

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const cedula = document.getElementById("cedula").value;
      const nombre = document.getElementById("nombre").value;
      const correo = document.getElementById("correo").value;
      const servicio = document.getElementById("servicio").value;
      const fecha = document.getElementById("fecha").value;
      const hora = document.getElementById("hora").value;

      if (filaEditando) {
        filaEditando.innerHTML = `
          <td>${cedula}</td>
          <td>${nombre}</td>
          <td>${correo}</td>
          <td>${servicio}</td>
          <td>${fecha}</td>
          <td>${hora}</td>
          <td>
            <button class="delete-btn">Eliminar</button>
            <button class="edit-btn">Editar</button>
          </td>
        `;
        agregarEventos(filaEditando);
        filaEditando = null;
      } else {
        const fila = document.createElement("tr");
        fila.innerHTML = `
          <td>${cedula}</td>
          <td>${nombre}</td>
          <td>${correo}</td>
          <td>${servicio}</td>
          <td>${fecha}</td>
          <td>${hora}</td>
          <td>
            <button class="delete-btn">Eliminar</button>
            <button class="edit-btn">Editar</button>
          </td>
        `;
        tabla.appendChild(fila);
        agregarEventos(fila);
      }

      form.reset();
    });

    function agregarEventos(fila) {
      fila.querySelector(".delete-btn").addEventListener("click", function() {
        fila.remove();
      });

      fila.querySelector(".edit-btn").addEventListener("click", function() {
        document.getElementById("cedula").value = fila.cells[0].textContent;
        document.getElementById("nombre").value = fila.cells[1].textContent;
        document.getElementById("correo").value = fila.cells[2].textContent;
        document.getElementById("servicio").value = fila.cells[3].textContent;
        document.getElementById("fecha").value = fila.cells[4].textContent;
        document.getElementById("hora").value = fila.cells[5].textContent;
        filaEditando = fila;

        // Cambiar a panel de usuario al editar
        tabs.forEach(t => t.classList.remove("active-tab"));
        panels.forEach(p => p.classList.remove("active"));
        document.querySelector(".tab[data-panel='panelUsuario']").classList.add("active-tab");
        document.getElementById("panelUsuario").classList.add("active");
      });
    }
  </script>
</body>
</html>

